<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jersey Price (Daily)</title>
  <style>
    :root {
      --primary: #4400ff;
      --light-bg: #f9f9fc;
      --border-color: #ddd;
      --accent: #ff6b6b;
      --text-dark: #333;
      --text-light: #666;
      --oversize-bg: #ffe5e5;
      --oversize-text: #a80000;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-bg);
      color: var(--text-dark);
      margin: 0;
      padding: 30px;
    }

    h1, h2 {
      color: var(--primary);
    }

    .branding {
      font-size: 1.4em;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--primary);
    }

    .button-container {
      margin-bottom: 20px;
    }

    .button-container button {
      background-color: var(--primary);
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      font-size: 0.95em;
      margin-right: 10px;
    }

    .button-container button:hover {
      background-color: #3300cc;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      background-color: #fff;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      border-radius: 10px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid var(--border-color);
      padding: 10px;
      text-align: center;
      font-size: 0.92em;
    }

    th {
      background-color: #f0f0ff;
      color: var(--text-dark);
    }

    .section-title {
      background: var(--primary);
      color: #fff;
      font-size: 1.1em;
      padding: 12px 0;
    }

    input[type="number"] {
      width: 80px;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      text-align: center;
      font-size: 0.9em;
    }

    .grand-totals {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      margin-top: 20px;
    }

    .grand-totals table {
      margin-top: 10px;
    }

    .grand-totals p {
      font-size: 1em;
      color: var(--text-dark);
    }

    .grand-totals span {
      font-weight: bold;
      color: var(--accent);
    }

    @media print {
      body * {
        visibility: hidden;
      }
      .printable, .printable * {
        visibility: visible;
      }
      .printable {
        position: absolute;
        left: 0;
        top: 0;
      }
    }
  </style>
</head>
<body>

<div class="branding">Inspirazs Sdn. Bhd.</div>
<h1 class="no-print">Jersey Price (Daily)</h1>

<div class="button-container no-print">
  <button onclick="window.print()">Print Page</button>
  <button onclick="exportCSV()">Export CSV</button>
</div>

<div id="tables"></div>

<div class="grand-totals printable">
  <h2>Order Summary</h2>
  <div id="print-summary"></div>
  <p><strong>Total Normal Price:</strong> RM <span id="grand-normal">0.00</span></p>
</div>

<script>
/*
  Simplified product list per user's request:
  - Only normal price used (no promo)
  - No sizes (single unit price applies to all)
  - Muslimah only has Round neck entry
  Prices (RM):
    Round Neck Short Sleeve = 2.00
    Round Neck Long Sleeve = 2.20
    Muslimah Round Neck = 2.50
    Collar Short Sleeve = 3.50
    Collar Long Sleeve = 3.70
*/
const products = [
  { name: "Short Sleeve", neck: "Round", normal: 2.00 },
  { name: "Long Sleeve", neck: "Round", normal: 2.20 },
  { name: "Short Sleeve", neck: "Collar", normal: 3.50 },
  { name: "Long Sleeve", neck: "Collar", normal: 3.70 },
  { name: "Muslimah", neck: "Round", normal: 2.50 },
];

const tablesContainer = document.getElementById("tables");

products.forEach((product, idx) => {
  const table = document.createElement("table");
  let html = `<tr><th class="section-title" colspan="4">${idx + 1}. ${product.name} (Neck: ${product.neck})</th></tr>`;
  html += `<tr><th>QTY</th><th>Unit Price (RM)</th><th>Total QTY</th><th>Total Normal (RM)</th></tr>`;

  html += `<tr>`;
  html += `<td><input type="number" min="0" value="0" class="qty" data-idx="${idx}"></td>`;
  html += `<td>${product.normal.toFixed(2)}</td>`;
  html += `<td class="total-qty" data-idx="${idx}">0</td>`;
  html += `<td class="total-normal" data-idx="${idx}">0.00</td>`;
  html += `</tr>`;

  table.innerHTML = html;
  tablesContainer.appendChild(table);
});

function updateTotals() {
  const qtyInputs = document.querySelectorAll(".qty");
  const totals = {};
  let grandNormal = 0;

  qtyInputs.forEach(input => {
    const idx = input.dataset.idx;
    const qty = parseInt(input.value, 10) || 0;
    const product = products[idx];
    const unit = product.normal;

    const normTotal = qty * unit;

    totals[idx] = totals[idx] || { name: `${product.name} (${product.neck})`, qty: 0, normal: 0 };
    totals[idx].qty += qty;
    totals[idx].normal += normTotal;

    grandNormal += normTotal;
  });

  // Update per-product table totals (or zero them)
  for (let i = 0; i < products.length; i++) {
    const tdQty = document.querySelector(`.total-qty[data-idx="${i}"]`);
    const tdNormal = document.querySelector(`.total-normal[data-idx="${i}"]`);
    if (totals[i]) {
      if (tdQty) tdQty.textContent = totals[i].qty;
      if (tdNormal) tdNormal.textContent = totals[i].normal.toFixed(2);
    } else {
      if (tdQty) tdQty.textContent = '0';
      if (tdNormal) tdNormal.textContent = '0.00';
    }
  }

  // Build print summary
  let summaryHTML = '<table><tr><th>Item</th><th>Qty</th><th>Normal (RM)</th></tr>';
  Object.entries(totals).forEach(([idx, data]) => {
    summaryHTML += `<tr><td>${data.name}</td><td>${data.qty}</td><td>${data.normal.toFixed(2)}</td></tr>`;
  });
  summaryHTML += '</table>';

  document.getElementById("print-summary").innerHTML = summaryHTML;
  document.getElementById("grand-normal").textContent = grandNormal.toFixed(2);
}

function exportCSV() {
  const rows = [["Item", "Qty", "Normal (RM)"]];
  const qtyInputs = document.querySelectorAll(".qty");
  const totals = {};

  qtyInputs.forEach(input => {
    const idx = input.dataset.idx;
    const qty = parseInt(input.value, 10) || 0;
    if (qty === 0) return;

    const product = products[idx];
    const unit = product.normal;
    const normTotal = qty * unit;

    totals[idx] = totals[idx] || { name: `${product.name} (${product.neck})`, qty: 0, normal: 0 };
    totals[idx].qty += qty;
    totals[idx].normal += normTotal;
  });

  Object.values(totals).forEach(data => {
    rows.push([data.name, data.qty, data.normal.toFixed(2)]);
  });

  const csvContent = "data:text/csv;charset=utf-8," + rows.map(e => e.join(",")).join("\n");
  const link = document.createElement("a");
  link.setAttribute("href", encodeURI(csvContent));
  link.setAttribute("download", "jersey_price_summary.csv");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

// Update totals frequently so UI stays responsive while typing
setInterval(updateTotals, 200);
</script>

</body>
</html>


